<?xml version="1.0" ?>
<layer-spec xmlns="urn:jboss:galleon:layer-spec:1.0" name="elytron-security">   
    <dependencies>
        <layer name="base-server"/> 
    </dependencies>
    <packages>
        <package name="org.jboss.as.domain-add-user"/>
    </packages>
    <feature spec="core-service.management.management-interface.http-interface">
        <param name="socket-binding" value="management-http"/>
        <feature spec="core-service.management.management-interface.http-interface.http-upgrade">
            <param name="sasl-authentication-factory" value="management-sasl-authentication"/>
            <param name="enabled" value="true"/>
        </feature>
    </feature>
    <feature spec="subsystem.elytron">
        <feature-group name="elytron-common"/>
        <feature-group name="elytron-app"/>
    </feature> 
    <feature spec="subsystem.elytron">
        <param name="final-providers" value="combined-providers"/>
        <param name="disallowed-providers" value="[OracleUcrypto]"/>
        <feature-group name="elytron-app">
            <include feature-id="subsystem.elytron.security-domain:security-domain=ApplicationDomain">
                <param name="realms" value="[{realm=ApplicationRealm,role-decoder=groups-to-roles},{realm=local}]"/>
                <!--
                <feature spec="subsystem.elytron.security-domain.realms">
                    <param name="realm" value="local"/>
                </feature>
                -->
            </include>
        </feature-group>
        <feature-group name="elytron-management"/>
    </feature>
</layer-spec>
